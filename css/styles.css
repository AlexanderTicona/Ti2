:root {
    --bg-dark: #050505;
    --bg-panel: #0d0d0f;
    --accent: #00f2ff;
    --border: #222226;
    --text-main: #e0e0e0;
    --sidebar-w: 55px;
}

* { box-sizing: border-box; margin: 0; padding: 0; }
body { background: var(--bg-dark); color: var(--text-main); font-family: 'Inter', sans-serif; overflow: hidden; height: 100vh; }

#app-shell { display: flex; height: 100%; }

/* SIDEBAR: Pesta√±as Orbitron */
.sidebar { width: var(--sidebar-w); background: #000; border-right: 1px solid var(--border); display: flex; flex-direction: column; align-items: center; padding: 15px 0; }
.brand { font-family: 'Orbitron'; font-weight: 900; color: var(--accent); margin-bottom: 30px; font-size: 11px; }

.nav-btn { 
    background: none; border: 1px solid var(--border); color: #666; 
    width: 42px; min-height: 85px; cursor: pointer; border-radius: 4px; 
    margin-bottom: 12px; display: flex; align-items: center; justify-content: center;
}

.full-name, .short-name { 
    writing-mode: vertical-rl; transform: rotate(180deg); 
    font-family: 'Orbitron'; font-size: 10px; font-weight: 700; letter-spacing: 2px; 
}

.short-name { display: none; }
@media (max-width: 1024px) {
    .full-name { display: none; } .short-name { display: block; }
    .nav-btn { min-height: 50px; }
}

.nav-btn.active { border-color: var(--accent); color: var(--accent); background: rgba(0, 242, 255, 0.08); }

/* TOP NAV: PK Izquierda */
.top-nav { height: 55px; background: var(--bg-panel); border-bottom: 1px solid var(--border); display: flex; align-items: center; padding: 0 20px; }
.pk-group { display: flex; align-items: baseline; gap: 8px; }
.pk-prefix { font-family: 'JetBrains Mono'; color: #555; font-size: 14px; font-weight: 800; }
#pk-input { 
    background: transparent; border: none; font-family: 'JetBrains Mono'; 
    font-size: 24px; color: var(--accent); font-weight: 800; width: 180px; outline: none; 
}
.header-spacer { flex: 1; }
.btn-primary { background: var(--accent); border: none; padding: 10px 20px; border-radius: 4px; font-weight: 800; font-size: 11px; cursor: pointer; color: #000; }

/* GRID FIX: Seccion Transversal 100% abajo */
#viewport-grid { 
    flex: 1; display: grid; gap: 6px; padding: 6px; background: #000; 
    height: calc(100vh - 125px); overflow: hidden;
}

.layout-mixed {
    grid-template-areas: "planta perfil" "seccion seccion";
    grid-template-columns: 1fr 1fr; 
    grid-template-rows: 1fr 1fr;
}

.layout-planta, .layout-perfil, .layout-seccion {
    grid-template-areas: "main";
    grid-template-columns: 1fr !important;
    grid-template-rows: 1fr !important;
}

.layout-planta #v-planta, .layout-perfil #v-perfil, .layout-seccion #v-seccion {
    grid-area: main;
    height: 100% !important;
}

.layout-planta #v-perfil, .layout-planta #v-seccion { display: none; }
.layout-perfil #v-planta, .layout-perfil #v-seccion { display: none; }
.layout-seccion #v-planta, .layout-seccion #v-perfil { display: none; }

#v-planta { grid-area: planta; } #v-perfil { grid-area: perfil; } #v-seccion { grid-area: seccion; }

.v-container { background: #000; border: 1px solid var(--border); display: flex; flex-direction: column; overflow: hidden; height: 100%; }
.v-header { padding: 8px 12px; font-size: 10px; color: var(--accent); background: #121214; border-bottom: 1px solid var(--border); font-weight: 800; }
canvas { flex: 1; width: 100%; height: 100%; display: block; }

/* FOOTER: Despegado del borde inferior */
.bottom-controls { 
    height: 70px; background: var(--bg-panel); 
    display: flex; align-items: center; 
    padding: 0 20px 10px 20px; 
    padding-bottom: env(safe-area-inset-bottom, 15px); /* Fix iPhone */
    gap: 25px; border-top: 1px solid var(--border);
}

.slider-container { flex: 1; display: flex; align-items: center; }
#master-slider { 
    width: 100%; accent-color: var(--accent); cursor: pointer; 
    height: 30px; touch-action: none; 
}